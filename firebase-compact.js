let _0xe6e7fa=_0x5d69;function version0010(){}!function(){for(var e=_0x5d69,n=_0x8a59();;)try{if(574256==-parseInt(e(400))+-parseInt(e(217))/2*(parseInt(e(344))/3)+-parseInt(e(349))/4*(-parseInt(e(300))/5)+-parseInt(e(169))/6+parseInt(e(215))/7*(-parseInt(e(366))/8)+-parseInt(e(376))/9+parseInt(e(341))/10*(parseInt(e(357))/11))break;n.push(n.shift())}catch(e){n.push(n.shift())}}();let _0x241c97=_0xe6e7fa(346);var _0x545dd3={apiKey:_0xe6e7fa(449),authDomain:_0xe6e7fa(452),projectId:"kourio-2dc0d",databaseURL:"https://kourio-2dc0d-default-rtdb.firebaseio.com/",storageBucket:_0xe6e7fa(402),messagingSenderId:_0xe6e7fa(262),appId:_0xe6e7fa(281),measurementId:_0xe6e7fa(224)};firebase.initializeApp(_0x545dd3),window.firebaseSessionId=generateSessionId();let _0x5cc372=firebase.database();function loginWithUsernameAndPassword(r,e){let a=_0xe6e7fa;firebase.auth()[a(251)](r+a(260),e).then(e=>{var n=a;window.user=e[n(343)],unityInstanceWrapper.sendMessage(_0x241c97,n(412),n(255)),showUserDetails(e.user[n(293)]=r,e[n(343)])})[a(274)](n=>{var r=a;try{var e=JSON[r(377)](n.message)[r(205)][r(380)];unityInstanceWrapper[r(216)](_0x241c97,r(412),formatErrorMessage(e)),console[r(205)](r(315),e)}catch(e){unityInstanceWrapper[r(216)](_0x241c97,r(412),n[r(380)]),console[r(205)](r(315),n[r(380)])}})}function registerWithUsernameAndPassword(a,t){let s=_0xe6e7fa,e=document[s(312)](s(389)),o=(e&&e[s(385)](),document[s(338)](s(180)));o.setAttribute("id",s(389)),o[s(350)][s(299)]=s(442);var n=document.createElement(s(180));n.setAttribute("id",s(393)),o.appendChild(n),document[s(416)][s(171)](o),grecaptcha[s(390)](s(393),{sitekey:"6LcbHsEpAAAAANYI5zG8Locf0rVzqpS-rNfXZF1M",theme:s(391),callback:function(e){let r=s;fetch(r(403),{method:"POST",headers:{"Content-Type":r(401)},body:JSON[r(447)]({username:a,password:t,recaptchaToken:e})})[r(221)](e=>e.json())[r(221)](e=>{var n=r;e.success?(unityInstanceWrapper.sendMessage(_0x241c97,n(375),n(255)),loginWithUsernameAndPassword(a,t)):unityInstanceWrapper[n(216)](_0x241c97,n(375),"Failed-"+e[n(380)])})[r(274)](e=>{var n=r;unityInstanceWrapper[n(216)](_0x241c97,"UsernameRegisterResultJS","Failed-"+e[n(380)])})[r(201)](()=>{var e=r;document[e(416)].removeChild(o)})}}),o[s(220)](s(179),e=>{var n=s;e[n(445)]===o&&(unityInstanceWrapper[n(216)](_0x241c97,n(375),n(362)),document[n(416)][n(323)](o))}),n[s(220)](s(179),e=>e[s(271)]())}function formatErrorMessage(e){let n=_0xe6e7fa,r=e[n(189)](),a=r[n(326)]("_")[n(273)](e=>e[n(243)](0)[n(237)]()+e[n(223)](1)),t=a[n(263)](" ");return t}function _0x5d69(e,n){let r=_0x8a59();return(_0x5d69=function(e,n){return e-=168,r[e]})(e,n)}function GoogleLogin(){let r=_0xe6e7fa,e=new firebase.auth[r(432)];firebase[r(333)]()[r(202)](e)[r(221)](e=>{showUserDetails("",e.user)})[r(274)](e=>{var n=r;console[n(386)](n(365)),console[n(386)](e)})}function EmailPasswordLogin(e){let n=_0xe6e7fa;var[a,t]=e[n(326)](":");firebase[n(333)]()[n(251)](a,t)[n(221)](e=>{showUserDetails("",e[n(343)])})[n(274)](e=>{let r=n;e[r(168)]===r(439)?firebase[r(333)]()[r(325)](a,t).then(e=>{showUserDetails("",e[r(343)])})[r(274)](e=>{var n=r;console[n(386)](n(354)),console.log(e)}):(console[r(386)](r(254)),console[r(386)](e))})}function FacebookLogin(){let a=_0xe6e7fa,e=new firebase.auth[a(192)];firebase[a(333)]().signInWithPopup(e)[a(221)](e=>{let r=a;showUserDetails("",e.user);var n=firebase[r(333)]()[r(329)],e=firebase.auth[r(192)][r(436)](e.credential.accessToken);n.linkWithCredential(e)[r(221)](function(){console.log("Facebook account linked successfully")})[r(274)](function(e){var n=r;console[n(386)](n(197),e)})})[a(274)](e=>{var n=a;console[n(386)](n(246)),console[n(386)](e)})}function TwitterLogin(){let r=_0xe6e7fa,e=new firebase.auth.TwitterAuthProvider;firebase.auth()[r(202)](e)[r(221)](e=>{console.log("Twitter Login Success!"),showUserDetails("",e.user)})[r(274)](e=>{var n=r;console[n(386)](n(448)),console[n(386)](e)})}function requestUserData(){var e=_0xe6e7fa;unityInstanceWrapper.sendMessage(_0x241c97,e(234),window[e(387)])}function showUserDetails(e,n){let r=_0xe6e7fa;setupOnlineStatusTracking();n[r(293)]||(e=e,{}[r(293)]=e);var e=extractUsername(n[r(421)])+"|"+n[r(421)]+"|null|"+n[r(218)];window[r(387)]=e,typeof unityInstance!==r(244)&&void 0!==window[r(387)]&&(e=_0x5cc372[r(381)](r(414)+n[r(218)]+r(328)),window.hasSetSession||(window[r(214)]=!0,e.set(window[r(358)])),e.on("value",e=>{var n=r,e=(window[n(214)]=!0,e[n(364)]());e&&e!==window.firebaseSessionId&&(console[n(205)](n(395)+window[n(358)]+", Actual: "+e+". Logging out user."),isNullOrWhitespace(window[n(358)])||isNullOrWhitespace(e)?console[n(205)]("Invalid session ID detected, but one or both IDs are null or whitespace."):(console[n(205)]("Invalid session ID detected. Expected: "+window[n(358)]+", Actual: "+e+"."),unityInstanceWrapper[n(216)](_0x241c97,"OnSessionError","Logged in from another device")))}),unityInstanceWrapper[r(216)](_0x241c97,r(234),window[r(387)]))}function extractUsername(e){var n=_0xe6e7fa;return e[n(256)]("@")?e.split("@")[0]:n(277)}let _0x510d10=window[_0xe6e7fa(214)]=!1,_0x4341a3=null;function setupOnlineStatusTracking(){let a=_0xe6e7fa,e=firebase[a(333)]().currentUser;if(e){var n=e[a(218)];_0x510d10&&_0x4341a3&&(_0x4341a3[a(231)]()[a(316)](),_0x510d10=!1);let r=firebase[a(173)]()[a(381)](a(337)+n);_0x4341a3=r,firebase[a(173)]()[a(381)](".info/connected").on("value",e=>{var n=a;!1!==e[n(364)]()&&(r[n(231)]()[n(385)](),r[n(359)](!0))}),_0x510d10=!0}}function tearDownOnlineStatusTracking(){var e=_0xe6e7fa;_0x510d10&&_0x4341a3&&(_0x4341a3[e(231)]().cancel(),_0x4341a3[e(385)](),_0x510d10=!1)}function setUserEmail(e,n,r){let a=_0xe6e7fa,t="true"===r,s=firebase[a(173)]().ref(a(181)+e+"/"+n);s[a(359)](t)[a(221)](()=>{var e=a;console[e(386)]("Email consent for "+n+e(261)+t)})[a(274)](e=>{var n=a;console[n(205)](n(253),e)})}function signOutSessionError(){var e=_0xe6e7fa;window[e(214)]=!1,tearDownOnlineStatusTracking(),stopListeningForInvites(),firebase.auth()[e(178)](),location[e(230)]()}function isNullOrWhitespace(e){return null==e||""===e.trim()}let refreshTokenInterval;function checkIfAdmin(){let r=_0xe6e7fa;window[r(343)]&&window[r(343)][r(340)]()[r(221)](e=>{var n=r;!0===e[n(353)][n(233)]?unityInstanceWrapper[n(216)](n(187),"OnReceivedIsAdmin","1"):unityInstanceWrapper.sendMessage(n(187),n(444),"0")})[r(274)](e=>{var n=r;console[n(205)](n(174),e),unityInstanceWrapper[n(216)](n(187),n(444),e.message.toString())})}function getPromoCode(r){let a=_0xe6e7fa;_0x5cc372[a(381)](a(407)+r)[a(334)](a(170))[a(221)](function(e){var n=a,e=e.val(),e=JSON[n(447)](e);console.log(n(210)+e),unityInstanceWrapper[n(216)](_0x241c97,n(219),e)})[a(274)](e=>{var n=a;console[n(386)]("Error getting promo code for promo: "+r+n(363)+e),unityInstanceWrapper[n(216)](_0x241c97,n(219),n(406))})}function setData(e,n,a,t,s){let o=_0xe6e7fa;_0x5cc372.ref(e)[o(209)]({[a]:t},e=>{let r=o;e?unityInstanceWrapper.sendMessage(_0x241c97,"OnSetData",JSON.stringify({err:e})+"&"+s):n?_0x5cc372[r(381)](n)[r(209)]({[a]:t},e=>{var n=r;unityInstanceWrapper[n(216)](_0x241c97,n(287),JSON.stringify({err:e})+"&"+s)}):unityInstanceWrapper[r(216)](_0x241c97,r(287),JSON.stringify({err:null})+"&"+s)})}function setDataNew(e,n,r,a){let t=_0xe6e7fa;r=isNaN(r)||""===r.trim()?r:parseInt(r);_0x5cc372[t(381)](e).update({[n]:r},e=>{var n=t;unityInstanceWrapper[n(216)](_0x241c97,n(287),JSON[n(447)]({err:e})+"&"+a)})}function createClan(e,n,r,a){let t=_0xe6e7fa;create_Clan(e,n,r)[t(221)](e=>{var n=t;e?(console[n(386)](n(415)+e),unityInstanceWrapper[n(216)](_0x241c97,n(450),e+"&"+a)):(console[n(386)](n(195)),unityInstanceWrapper[n(216)](_0x241c97,n(450),n(383)+a))})}function create_Clan(n,a,t){let s=_0xe6e7fa,o=_0x5cc372[s(381)](s(193))[s(379)](n);return o.once("value")[s(221)](e=>{let r=s;return e[r(229)]()?(console.error(r(235)),Promise[r(240)](r(204))):(e={name:n,leader:a,color:t,requests:{},members:{[a]:!0}},o.set(e)[r(221)](()=>{var e=r;return console[e(386)](e(322)),n})[r(274)](e=>{var n=r;return console[n(205)](n(360),e),null}))})[s(274)](e=>{var n=s;return console[n(205)](n(443),e),null})}function addMember(t,s,r,o){let c=_0xe6e7fa,i=(console[c(386)](c(430)+t+c(423)+s+c(397)+r+c(318)+o),_0x5cc372.ref(c(193))[c(379)](t));i.child("leader").once(c(170))[c(221)](e=>{let a=c,n=e.val();n===r?i.child("requests")[a(379)](s)[a(334)](a(170)).then(e=>{let r=a;e[r(229)]()?i[r(379)]("members")[r(379)](s)[r(359)](!0)[r(221)](()=>{let a=r;console[a(386)](a(249)+s+a(394)+t),_0x5cc372[a(381)](a(414)+s+a(296))[a(359)](t)[a(221)](()=>{let r=a;e[r(381)][r(385)]()[r(221)](()=>{var e=r;unityInstanceWrapper[e(216)](_0x241c97,"OnSetDataNew",e(431)+o)}).catch(e=>{var n=r;console[n(205)]("Error removing request: ",e),unityInstanceWrapper[n(216)](_0x241c97,n(450),"Failed&"+o)})})[a(274)](e=>{var n=a;console.error(n(222),e),unityInstanceWrapper[n(216)](_0x241c97,n(450),"Failed&"+o)})})[r(274)](e=>{var n=r;console[n(205)]("Error adding member to clan: ",e),unityInstanceWrapper[n(216)](_0x241c97,n(450),"Failed&"+o)}):(console[r(205)]("User is not in the requests."),unityInstanceWrapper[r(216)](_0x241c97,r(450),r(289)+o))}).catch(e=>{var n=a;console[n(205)](n(239),e),unityInstanceWrapper[n(216)](_0x241c97,n(450),n(383)+o)}):(console.error("Provided leaderID does not match the clan's leader."),unityInstanceWrapper.sendMessage(_0x241c97,a(450),"InvalidLeader&"+o))}).catch(e=>{var n=c;console[n(205)](n(388),e),unityInstanceWrapper.sendMessage(_0x241c97,n(450),n(383)+o)})}function removePlayerFromClan(c,i,l,d){let a=_0xe6e7fa,u=_0x5cc372[a(381)](a(193)).child(c);u[a(334)](a(170),e=>{let r=a;if(e[r(229)]()){let s=u[r(379)](r(384)),o=u[r(379)](r(369));o[r(334)](r(170))[r(221)](e=>{let t=r,n=e[t(364)]();n===i?s[t(334)](t(170))[t(221)](e=>{let a=t,r=[];e.forEach(e=>{var n=_0x5d69,e=_0x5cc372[n(381)](n(414)+e[n(186)]+n(296))[n(385)]();r.push(e)}),Promise[a(321)](r)[a(221)](()=>{let r=a;u[r(385)]()[r(221)](()=>{var e=r;console.log(e(382)+i+e(371)+c+". Clan deleted."),unityInstanceWrapper[e(216)](_0x241c97,e(450),"Success&"+d)})[r(274)](e=>{var n=r;console[n(205)](n(301),e),unityInstanceWrapper[n(216)](_0x241c97,"OnSetDataNew","Failed&"+d)})})[a(274)](e=>{var n=a;console.error("Error removing 'clan' property for members: ",e),unityInstanceWrapper[n(216)](_0x241c97,n(450),"Failed&"+d)})}).catch(e=>{var n=t;console[n(205)]("Error fetching clan members for deletion: ",e),unityInstanceWrapper.sendMessage(_0x241c97,n(450),n(383)+d)}):s[t(379)](i)[t(334)](t(170))[t(221)](e=>{let a=t;e[a(229)]()?_0x5cc372[a(381)](a(414)+i+"/public/clan")[a(385)]()[a(221)](()=>{let r=a;e.ref[r(385)]().then(()=>{let a=r;s[a(334)](a(170))[a(221)](e=>{let r=a;e[r(229)]()?o[r(359)](l)[r(221)](()=>{var e=r;console[e(386)]("Player "+i+e(191)+c+e(438)+l+"."),unityInstanceWrapper.sendMessage(_0x241c97,e(450),"Success&"+d)})[r(274)](e=>{var n=r;console[n(205)](n(183),e),unityInstanceWrapper[n(216)](_0x241c97,"OnSetDataNew",n(383)+d)}):u[r(385)]()[r(221)](()=>{var e=r;console[e(386)](e(382)+i+e(191)+c+e(305)),unityInstanceWrapper.sendMessage(_0x241c97,"OnSetDataNew",e(431)+d)})[r(274)](e=>{var n=r;console[n(205)](n(301),e),unityInstanceWrapper[n(216)](_0x241c97,n(450),n(383)+d)})})[a(274)](e=>{var n=a;console.error(n(304),e),unityInstanceWrapper[n(216)](_0x241c97,n(450),n(383)+d)})})[r(274)](e=>{var n=r;console.error(n(355),e),unityInstanceWrapper[n(216)](_0x241c97,"OnSetDataNew",n(383)+d)})})[a(274)](e=>{var n=a;console[n(205)]("Error removing 'clan' property for user: ",e),unityInstanceWrapper[n(216)](_0x241c97,n(450),"Failed&"+d)}):(console[a(205)](a(297)),unityInstanceWrapper[a(216)](_0x241c97,a(450),"PlayerNotInClan&"+d))}).catch(e=>{var n=t;console[n(205)](n(304),e),unityInstanceWrapper[n(216)](_0x241c97,n(450),n(383)+d)})})[r(274)](e=>{var n=r;console[n(205)](n(429),e),unityInstanceWrapper[n(216)](_0x241c97,n(450),n(383)+d)})}else _0x5cc372[r(381)](r(232)).orderByChild(r(203))[r(404)](c)[r(334)](r(170),e=>{var n=r;e.forEach(e=>{var n=_0x5d69;e[n(381)][n(379)](n(203))[n(385)]()}),console[n(386)]("Broken clan "+c+" references removed from all users."),unityInstanceWrapper[n(216)](_0x241c97,n(450),n(431)+d)})[r(274)](e=>{var n=r;console[n(205)](n(196),e),unityInstanceWrapper.sendMessage(_0x241c97,n(450),"Failed&"+d)})})[a(274)](e=>{var n=a;console.error(n(398),e),unityInstanceWrapper[n(216)](_0x241c97,n(450),n(383)+d)})}function adminSetDataOn(e,n,r,a){var t=_0xe6e7fa;_0x5cc372[t(381)](t(193))[t(379)](clanName)}function declineMember(t,s,r,o){let c=_0xe6e7fa,i=(console.log(c(185)+t+", memberId="+s+c(397)+r+c(318)+o),_0x5cc372[c(381)](c(193))[c(379)](t));i.child("leader")[c(334)](c(170))[c(221)](e=>{let a=c,n=e[a(364)]();if(n===r){let n=i[a(379)](a(279));n[a(379)](s)[a(334)](a(170))[a(221)](e=>{let r=a;e.exists()?n[r(379)](s)[r(385)]().then(()=>{var e=r;console.log(e(348)+s+e(259)+t),unityInstanceWrapper[e(216)](_0x241c97,e(450),"Success&"+o)})[r(274)](e=>{var n=r;console[n(205)]("Error removing request: ",e),unityInstanceWrapper.sendMessage(_0x241c97,n(450),n(383)+o)}):(console.error("User is not in the requests."),unityInstanceWrapper[r(216)](_0x241c97,r(450),"UserNotInRequests&"+o))})[a(274)](e=>{var n=a;console.error(n(239),e),unityInstanceWrapper[n(216)](_0x241c97,n(450),n(383)+o)})}else console.error("Provided leaderID does not match the clan's leader."),unityInstanceWrapper.sendMessage(_0x241c97,"OnSetDataNew",a(241)+o)})[c(274)](e=>{var n=c;console[n(205)](n(388),e),unityInstanceWrapper[n(216)](_0x241c97,n(450),"Failed&"+o)})}function sendMembershipRequest(t,s,o){let r=_0xe6e7fa,c=(console[r(386)](r(335)+t+", senderUserID: "+s+"reqid:"+o),_0x5cc372.ref(r(193))[r(379)](t));c[r(334)]("value")[r(221)](e=>{let a=r;if(e[a(229)]()){let n=c[a(379)](a(279));n[a(379)](s)[a(334)](a(170)).then(e=>{let r=a;e.exists()?(errorStr=r(250)+s+r(413)+t,unityInstanceWrapper[r(216)](_0x241c97,r(450),errorStr+"&"+o)):n[r(379)](s)[r(359)](s).then(()=>{var e=r;console[e(386)](e(348)+s+e(378)+t),unityInstanceWrapper[e(216)](_0x241c97,e(450),e(431)+o)}).catch(e=>{var n=r;errStr=n(313)+e,unityInstanceWrapper[n(216)](_0x241c97,n(450),errStr+"&"+o)})})[a(274)](e=>{var n=a;errStr=n(418)+e,unityInstanceWrapper[n(216)](_0x241c97,n(450),errStr+"&"+o)})}else errorStr=a(411)+t+a(317),unityInstanceWrapper[a(216)](_0x241c97,a(450),errorStr+"&"+o)})[r(274)](e=>{var n=r;errStr=n(176)+e,unityInstanceWrapper.sendMessage(_0x241c97,n(450),errStr+"&"+o)})}function getUserData(e,a){let t=_0xe6e7fa;_0x5cc372[t(381)](t(232))[t(379)](e).on(t(170),e=>{var n=t;let r=JSON.stringify(e[n(364)]());null===r&&(r=n(265)),unityInstanceWrapper.sendMessage(_0x241c97,n(211),r+"&"+a)},e=>{var n=t;console[n(205)]("The read failed: "+e.code),console[n(205)](e)})}function getAllOnRef(e){let a=_0xe6e7fa;_0x5cc372[a(381)](e).on(a(170),e=>{var n=a;let r=JSON[n(447)](e[n(364)]());r=null===r?"null":r[n(420)](),unityInstanceWrapper.sendMessage(_0x241c97,n(211),r)},e=>{var n=a;console[n(386)]("Error getting data: "+e)})}function getLeaderboard(e){let a=_0xe6e7fa;console.log(a(419)+e),_0x5cc372[a(381)](e)[a(334)](a(170)).then(e=>{var n=a;let r=JSON[n(447)](e[n(364)]());r=null===r?n(265):r[n(420)](),unityInstanceWrapper[n(216)](_0x241c97,n(248),r)})[a(274)](e=>{var n=a;console[n(386)](n(308)+e)})}function startListeningForClanChanges(e,n){let r=_0xe6e7fa,a=firebase[r(173)]()[r(381)]("users/"+e+r(296));a[r(399)](),n&&""!==n[r(282)]()&&((e=firebase[r(173)]().ref("clans/"+n+r(428)))[r(399)](),e.on(r(170),()=>{var e=r;unityInstanceWrapper[e(216)]("MainManager",e(295))})),a.on(r(170),()=>{var e=r;unityInstanceWrapper.sendMessage(e(187),e(295))})}function setUserData(n,e,r,a){let t=_0xe6e7fa,s=JSON.parse(e),o=JSON[t(377)](r);_0x5cc372[t(381)](t(414)+n)[t(359)](s,e=>{let r=t;_0x5cc372[r(381)](r(414)+n+r(182)).set(o,e=>{var n=r;console[n(386)](JSON[n(447)]({err2:e})),unityInstanceWrapper[n(216)](_0x241c97,"OnSetData",JSON.stringify({err2:e})+"&"+a)})})}function setLeaderboardRecords(n,s,r){let o=_0xe6e7fa,c=[];for(let e=0;e<n[o(374)];e++){let a=n[e],t=r[e];c[o(199)](new Promise((n,r)=>{var e=o;_0x5cc372[e(381)](a+s)[e(359)](t[e(420)](),e=>{e?r("Failed to set record for "+s+" in "+a):n()})}))}return Promise[o(321)](c)[o(221)](()=>{var e=o;unityInstanceWrapper[e(216)](_0x241c97,"OnAddedPoints","Success")})[o(274)](e=>{var n=o;unityInstanceWrapper[n(216)](_0x241c97,n(396),e)})}function getClipboard(){let r=_0xe6e7fa;navigator[r(194)][r(227)]()[r(221)](e=>{var n=r;console.log("clipboard: "+e),unityInstanceWrapper[n(216)]("MainManager",n(288),e)}).catch(e=>{var n=r;console[n(205)]("Failed to read clipboard:",e)})}function checkpsgpb(){let r=_0xe6e7fa;firebase[r(173)]().ref(r(408)).once(r(170))[r(221)](e=>{var n=r;!0===e[n(364)]()&&unityInstanceWrapper[n(216)](n(310),n(306))})}function getData(e,a){let t=_0xe6e7fa;_0x5cc372.ref(e).on(t(170),e=>{var n=t;let r=e[n(364)]();r=null===r?n(265):r[n(420)](),unityInstanceWrapper[n(216)](_0x241c97,n(211),r+"&"+a)})}function getDataRaw(e,n,r){let a=_0xe6e7fa;n=_0x5cc372[a(381)](n);e?n[a(334)](a(170))[a(221)](e=>{var n=a,e=JSON[n(447)](e[n(364)]());unityInstanceWrapper[n(216)](_0x241c97,"OnGotData",e+"&"+r)}).catch(e=>{var n=a;console[n(205)](n(207),e),unityInstanceWrapper[n(216)](_0x241c97,"OnGotData",n(265)+"&"+r)}):n.on(a(170),e=>{var n=a,e=JSON[n(447)](e[n(364)]());unityInstanceWrapper[n(216)](_0x241c97,"OnGotData",e+"&"+r)})}function LogoutUser(){let n=_0xe6e7fa;removeFriendRequestsListener(),removeFriendsListener(),console[n(386)]("LogoutUser called from JS"),window[n(214)]=!1,tearDownOnlineStatusTracking(),stopListeningForInvites(),firebase[n(333)]()[n(178)]()[n(221)](()=>{var e=n;unityInstanceWrapper[e(216)](_0x241c97,e(361))})[n(274)](e=>{console.log("An error happened : "+e)})}function getUIDByEmail(e){let r=_0xe6e7fa,n=firebase[r(268)]()[r(238)](r(320));n({email:e}).then(e=>{var n=r;unityInstanceWrapper.sendMessage(_0x241c97,n(307),formatApiResponse(e.data))})[r(274)](e=>{var n=r;console[n(205)](e),unityInstanceWrapper[n(216)](_0x241c97,n(307),formatApiResponse(e))})}function addcc(e){var n=_0xe6e7fa;firebase[n(173)]()[n(381)](n(414)+e+n(303)).set("1")}function formatApiResponse(e){var n=_0xe6e7fa,n=Object[n(257)](e)[0];return n+": "+e[n]}function generateSessionId(){var n=_0xe6e7fa,r=n(356);let a="";for(let e=0;e<6;e++){var t=Math.floor(Math[n(433)]()*r[n(374)]);a+=r.charAt(t)}return a}firebase.auth().onAuthStateChanged(e=>{var n=_0xe6e7fa;refreshTokenInterval&&clearInterval(refreshTokenInterval),e?(refreshTokenInterval=setInterval(()=>{refreshToken()},3e6),showUserDetails("",e)):(console[n(386)](n(309)),unityInstanceWrapper[n(216)](_0x241c97,n(361)))});let _0x468e32=!1,_0x31ac2c=null;function getAndListenForFriends(e){let a=_0xe6e7fa;_0x468e32&&_0x31ac2c&&_0x31ac2c[a(186)]===e?console.log(a(434)):(_0x31ac2c&&(_0x31ac2c.off(a(170)),_0x468e32=!1),(_0x31ac2c=_0x5cc372[a(381)](a(414)+e+a(435))).on(a(170),e=>{var n=a,e=e[n(364)](),r="";e&&(r=Object[n(257)](e)[n(263)](",")),unityInstanceWrapper[n(216)](_0x241c97,n(351),r)},e=>{var n=a;unityInstanceWrapper.sendMessage(_0x241c97,n(405),e[n(380)])}),_0x468e32=!0)}function removeFriendsListener(){var e=_0xe6e7fa;_0x468e32&&_0x31ac2c?(_0x31ac2c[e(399)](e(170)),_0x468e32=!1,_0x31ac2c=null):console.log("No friends listener to remove.")}let _0x1d522d=!1,_0x46925b=null;function getAndListenForFriendRequests(e){let a=_0xe6e7fa;_0x1d522d&&_0x46925b&&_0x46925b.key===e?console[a(386)](a(290)):(_0x46925b&&(_0x46925b[a(399)]("value"),_0x1d522d=!1),(_0x46925b=_0x5cc372[a(381)](a(414)+e+a(225))).on(a(170),e=>{var n=a,e=e[n(364)](),r="";e&&(r=Object[n(257)](e)[n(263)](",")),unityInstanceWrapper[n(216)](_0x241c97,n(198),r)},e=>{var n=a;unityInstanceWrapper[n(216)](_0x241c97,n(405),e[n(380)])}),_0x1d522d=!0)}function removeFriendRequestsListener(){var e=_0xe6e7fa;_0x1d522d&&_0x46925b?(_0x46925b[e(399)](e(170)),_0x1d522d=!1,_0x46925b=null):console[e(386)](e(345))}function deleteUID(e){let r=_0xe6e7fa;console[r(386)]("deleting..."),firebase.functions().httpsCallable("delUser")({email:e})[r(221)](e=>{var n=r;e[n(311)]&&e[n(311)][n(245)]?(unityInstanceWrapper[n(216)]("MainManager",n(330),n(255)),console.log(n(280),e[n(311)][n(380)]),alert(n(283)+e.data.message)):(unityInstanceWrapper[n(216)](n(187),n(330),n(336)),console[n(386)](n(267),e[n(311)].error||n(336)),alert(n(270)+(e[n(311)][n(205)]||"Unknown error occurred.")))})[r(274)](e=>{var n=r;unityInstanceWrapper[n(216)](n(187),n(330),"'Error calling the delUser function"),console[n(205)](n(212),e),alert(n(269)+(e[n(380)]||n(336)))})}function sendFriendRequest(n,s){let r=_0xe6e7fa,e=_0x5cc372[r(381)](r(414)+n+r(372)+s);e.once("value",e=>{let t=r;if(e[t(229)]())unityInstanceWrapper[t(216)](_0x241c97,t(298),t(368));else{let a=_0x5cc372[t(381)](t(414)+s+t(200)+n),r=_0x5cc372.ref(t(414)+n+t(200)+s);a.once(t(170),e=>{let n=t;e[n(229)]()?unityInstanceWrapper[n(216)](_0x241c97,n(298),"<color=yellow>Request Already Sent!"):r[n(334)](n(170),e=>{let r=n;e.exists()?unityInstanceWrapper.sendMessage(_0x241c97,r(298),r(426)):a[r(359)](!0)[r(221)](()=>{var e=r;unityInstanceWrapper.sendMessage(_0x241c97,"OnSentFriendRequest",e(175))})[r(274)](e=>{var n=r;console[n(205)]("Error sending friend request:",e),unityInstanceWrapper[n(216)](_0x241c97,"OnSentFriendRequest","<color=red>"+e.message),unityInstanceWrapper[n(216)](_0x241c97,n(405),e[n(380)])})})})}})}function respondToFriendRequest(e,n,r){let a=_0xe6e7fa,t=_0x5cc372[a(381)]("users/"+e+a(200)+n),s=_0x5cc372[a(381)](a(414)+e+"/friends/"+n),o=_0x5cc372[a(381)](a(414)+n+a(372)+e);"ok"===r?Promise[a(321)]([s[a(359)](!0),o[a(359)](!0)])[a(221)](()=>{var e=a;return t[e(385)]()})[a(221)](()=>{var e=a;console[e(386)](e(427))})[a(274)](e=>{var n=a,e=e[n(380)];unityInstanceWrapper[n(216)](_0x241c97,n(405),e)}):t[a(385)]().then(()=>console[a(386)]("Friend request declined.")).catch(e=>{var n=a,e=e[n(380)];unityInstanceWrapper[n(216)](_0x241c97,n(405),e)})}function removeFriend(e,n){let r=_0xe6e7fa,a=_0x5cc372[r(381)](r(414)+e+r(372)+n),t=_0x5cc372[r(381)]("users/"+n+r(372)+e);a[r(385)]()[r(221)](()=>console.log(r(266)+n+r(424)+e+r(446)))[r(274)](e=>console[r(205)](r(451),e)),t[r(385)]()[r(221)](()=>console.log(r(266)+e+r(424)+n+r(446)))[r(274)](e=>console[r(205)](r(190),e))}let _0x5f20d8=new Set;function listenForFriendPresence(r){let a=_0xe6e7fa;_0x5f20d8[a(177)](r)||(_0x5cc372[a(381)](a(337)+r).on(a(170),e=>{var n=a,e=e[n(364)](),e=n(e?213:367);unityInstanceWrapper[n(216)](n(291)+r,n(226),e)},e=>{var n=a;console[n(205)](n(347),e)}),_0x5f20d8.add(r))}function removeListenerForFriendPresence(e){var n=_0xe6e7fa;_0x5f20d8[n(177)](e)&&(_0x5cc372.ref(n(337)+e)[n(399)](n(170)),_0x5f20d8.delete(e))}function sendInvite(e,n,r){let a=_0xe6e7fa,t=_0x5cc372.ref(a(414)+n+a(327)+e);t.set({timestamp:firebase[a(173)][a(236)].TIMESTAMP,roomName:r})[a(221)](()=>{})[a(274)](e=>console[a(205)]("Error sending invite:",e))}let _0x2f53a0=null;function listenForInvites(e){let r=_0xe6e7fa;_0x2f53a0||(_0x2f53a0=_0x5cc372[r(381)](r(414)+e+"/invites")).on(r(170),e=>{let s=r,o=e[s(364)]();if(o){let t=Date[s(285)]();Object[s(257)](o)[s(440)](e=>{let n=s,r=o[e],a=t-r[n(264)];6e4<a?_0x2f53a0[n(379)](e)[n(385)]()[n(274)](e=>console[n(205)](n(352),e)):unityInstanceWrapper[n(216)](_0x241c97,n(441),e+":"+r[n(247)])})}},e=>{var n=r;console[n(205)](n(319),e)})}function stopListeningForInvites(){var e=_0xe6e7fa;_0x2f53a0&&(_0x2f53a0[e(399)](e(170)),_0x2f53a0=null)}function _0x8a59(){let e=["OnFriendRequestsUpdate","push","/friendRequests/","finally","signInWithPopup","public/clan","ClanExists","error","Success! Token refreshed and active.","Error fetching data:","onload","update","Promo value: ","OnGotData","Error calling the delUser function:","online","hasSetSession","10038LvDyNM","sendMessage","22OVGDPm","uid","OnGetPromoCode","addEventListener","then","Error setting user clan: ","slice","G-VGVP085QMS","/friendRequests","FriendStatusUpdate","readText","href","exists","reload","onDisconnect","users","admin","OnLoggedInGoogle","Clan with the same name already exists.","ServerValue","toUpperCase","httpsCallable","Error checking requests: ","reject","InvalidLeader&","OnNewVersionDetected","charAt","undefined","success","Facebook Login Error:","roomName","OnGotLeaderboard","Member ","User ","signInWithEmailAndPassword","map.kour","Error setting email consent:","Email and Password Login Error:","Success","includes","keys","version.txt"," declined in clan ","@example.com"," set to ","45440111818","join","timestamp","null","Removed ","Error:","functions","Function Error: ","Error: ","stopPropagation","There was a problem with your fetch operation:","map","catch","lb/","ond","NoUsername","goOnline","requests","Success:","1:45440111818:web:c53fb4b1516807e8b85033","trim","Success: ","type","now","MapBuilder","OnSetData","OnGotClipboard","UserNotInRequests&","Listener for friend requests already set for this UID.","FriendButton_","Token refresh failed","displayName","Network response was not ok","OnClanDataChanged","/public/clan","Player is not a member of the clan.","OnSentFriendRequest","cssText","15GKANrk","Error deleting clan: ",".info/connected","/cc","Error checking clan members: ",", clan deleted.","OnPsgpb","OnGotUserUID","Error getting data: ","onAuthStateChanged! loggedOut.","UIManager","data","getElementById","Error sending membership request: ","no-cache","Login failed:","cancel"," does not exist",", reqID=","Error listening for invites:","getUserId","all","Clan created successfully!","removeChild","/invites","createUserWithEmailAndPassword","split","/invites/","/session","currentUser","ShowMessageCustom","download","readAsText","auth","once","js:sendMembershipRequest:clanName:","Unknown error occurred.","/presence/","createElement","no-store","getIdTokenResult","10sTzcnR","GET","user","289614pOwHwx","No friend requests listener to remove.","FirebasePlayerPrefs2023","Error listening for friend presence:","Request from ","889664cSNEZS","style","OnFriendsUpdate","Error deleting expired invite:","claims","Email and Password Registration Error:","Error removing player from clan: ","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789","17787264XmSNdT","firebaseSessionId","set","Error creating clan: ","OnLoggedOutGoogle","Cancelled-UserClosedCaptcha",". error: ","val","Google Login Error:","656NDDkcI","offline","<color=yellow>Already Friends!","leader","50 minutes passed! refreshing token..."," is the leader of clan ","/friends/","no-cache, no-store, must-revalidate","length","UsernameRegisterResultJS","2358126ymLgNu","parse"," sent to clan ","child","message","ref","Player ","Failed&","members","remove","log","loginData","Error checking leader ID: ","recaptchaModal","render","light","file","recaptchaContainer"," added to clan ","Invalid session ID detected. Expected: ","OnAddedPoints",", leaderID=","Error checking clan existence: ","off","75574SkCwch","application/json","kourio-2dc0d.appspot.com","https://kour.io/api/signup","equalTo","OnFriendError","Error","codes/","/psgpb","accept","result","Clan ","UsernameLoginResultJS"," has already sent a request to clan ","users/","Clan created with key: ","body","URL","Error checking for duplicate requests: ","js: getLeaderboard::","toString","email","OnMapLoaded",", memberId="," from ","files","<color=yellow>Request Already Received!","Friend request accepted.","/requests","Error checking clan leader: ","ERROR CAPTURING: addMember: clanName=","Success&","GoogleAuthProvider","random","Listener for friend s already set for this UID.","/friends","credential","input",", new leader is ","auth/user-not-found","forEach","OnInvite","\n        position: fixed;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        z-index: 1000;\n    ","Error checking if the clan exists: ","OnReceivedIsAdmin","target","'s friend list.","stringify","Twitter Login Error:","AIzaSyCj_9AFDvc4uAxLBsmZjD3E2sgOPkOOyP0","OnSetDataNew","Error removing friend from user's friend list:","kourio-2dc0d.firebaseapp.com","code","1157532gxQXva","value","appendChild","getIdToken","database","Error getting ID token result:","<color=green>Success","Error checking for clan existence: ","has","signOut","click","div","emails/","/public","Error setting new leader: ","replace","Declining member: clanName=","key","MainManager","revokeObjectURL","toLowerCase","Error removing user from friend's friend list:"," removed from clan ","FacebookAuthProvider","clans","clipboard","Clan creation failed.","Error cleaning up broken clan references: ","Error linking Facebook account:"];return(_0x8a59=function(){return e})()}function acceptAllInvites(e){let a=_0xe6e7fa,t=_0x5cc372[a(381)]("users/"+e+a(324));t[a(334)](a(170))[a(221)](e=>{let r=a,n=e.val();if(n)return e=Object[r(257)](n).map(e=>{var n=r;return t[n(379)](e)[n(385)]()}),Promise[r(321)](e)}).then(()=>{})[a(274)](e=>{var n=a;console[n(205)]("Error accepting all invites:",e)})}function checkVersion(r){let a=_0xe6e7fa,e={method:a(342),cache:a(339),headers:new Headers({"Cache-Control":a(373),Pragma:a(314),Expires:"0"})};fetch(a(258),e).then(e=>{var n=a;if(e.ok)return e.text();throw new Error(n(294))})[a(221)](e=>{var n=a,e=e[n(189)]()[n(184)](/\s/g,"");e!==r[n(189)]()[n(184)](/\s/g,"")&&(console[n(386)]("must update!"),unityInstanceWrapper[n(216)](n(187),n(242),""+e))})[a(274)](e=>{var n=a;console[n(205)](n(272),e)})}function deleteAtPath(e){var n=_0xe6e7fa;_0x5cc372.ref(e)[n(385)]()}function replb(e){var n=_0xe6e7fa;firebase[n(173)]()[n(381)](n(275)+e)[n(359)](!0)}function saveMap(e){var n=_0xe6e7fa,e=new Blob([e],{type:"application/json"}),e=window[n(417)].createObjectURL(e),r=document[n(338)]("a");r[n(228)]=e,r[n(331)]=n(252),document[n(416)][n(171)](r),r.click(),document.body[n(323)](r),window[n(417)][n(188)](e)}function loadMap(){let a=_0xe6e7fa,e=document[a(338)](a(437));e[a(284)]=a(392),e[a(409)]=".kour",e.onchange=e=>{let r=a,n=e[r(445)][r(425)][0];n?((e=new FileReader)[r(208)]=e=>{var n=r;console.log(e[n(445)][n(410)]),unityInstanceWrapper[n(216)](n(286),n(422),e.target[n(410)])},e[r(332)](n)):console.log("No file selected.")},e[a(179)]()}var _0x31504b=firebase[_0xe6e7fa(173)]()[_0xe6e7fa(381)](_0xe6e7fa(302));function attemptReconnect(){var a=setInterval(()=>{let r=_0x5d69;firebase[r(173)]()[r(278)](),_0x31504b[r(334)](r(170),function(e){var n=r;!0===e[n(364)]()&&(console[n(386)]("Reconnection successful."),unityInstanceWrapper[n(216)](_0x241c97,"onc"),clearInterval(a))})},5e3)}function refreshToken(){let r=_0xe6e7fa;console[r(386)](r(370));var e=firebase[r(333)]()[r(329)];e&&e[r(172)](!0)[r(221)](function(e){var n=r;console[n(386)](n(206))})[r(274)](function(e){var n=r;console.error(n(292),e)})}_0x31504b.on(_0xe6e7fa(170),function(e){var n=_0xe6e7fa;!1===e[n(364)]()&&(unityInstanceWrapper[n(216)](_0x241c97,n(276)),attemptReconnect())});